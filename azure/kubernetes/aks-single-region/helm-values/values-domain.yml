---
identityKeycloak:
    postgresql:
        enabled: false
    externalDatabase:
        # see https://artifacthub.io/packages/helm/bitnami/keycloak
        existingSecret: identity-keycloak-secret   # Name of an existing secret resource containing the database credentials
        existingSecretHostKey: host
        existingSecretPortKey: port
        existingSecretUserKey: user
        existingSecretDatabaseKey: database
        existingSecretPasswordKey: password

    auth:
        existingSecret: identity-secret-for-components
        passwordSecretKey: admin-password

global:
    elasticsearch:
        enabled: true

    ingress:
        enabled: true
        host: ${DOMAIN_NAME}
        tls:
            enabled: true
            secretName: camunda-c8-tls
        annotations:
            kubernetes.io/tls-acme: 'true'

    identity:
        auth:
            enabled: true
            publicIssuerUrl: https://${DOMAIN_NAME}/auth/realms/camunda-platform
            orchestration:
                secret:
                    existingSecret: identity-secret-for-components
                    existingSecretKey: orchestration-secret
                redirectUrl: https://${DOMAIN_NAME}/orchestration
            connectors:
                secret:
                    existingSecret: identity-secret-for-components
                    existingSecretKey: connectors-secret
            optimize:
                redirectUrl: https://${DOMAIN_NAME}/optimize
                secret:
                    existingSecret: identity-secret-for-components
                    existingSecretKey: optimize-secret
            webModeler:
                redirectUrl: https://${DOMAIN_NAME}/modeler
            console:
                redirectUrl: https://${DOMAIN_NAME}
                secret:
                    existingSecret: identity-secret-for-components
                    existingSecretKey: console-secret

identity:
    enabled: true
    contextPath: /identity
    fullURL: https://${DOMAIN_NAME}/identity

    firstUser:
        enabled: true
        secret:
            existingSecret: identity-secret-for-components
            existingSecretKey: first-user-password # demo

    externalDatabase:
        enabled: true
        host: ${DB_HOST}
        port: ${DB_PORT}
        username: ${DB_IDENTITY_USERNAME}
        database: ${DB_IDENTITY_NAME}
        secret:
            existingSecret: identity-postgres-secret
            existingSecretPasswordKey: password

connectors:
    contextPath: /connectors

webModeler:
    enabled: false
    contextPath: /modeler

    restapi:
        externalDatabase:
            url: jdbc:postgresql://${DB_HOST}:5432/${DB_WEBMODELER_NAME}?sslmode=require
            user: ${DB_WEBMODELER_USERNAME}
            secret:
                existingSecret: webmodeler-postgres-secret
                existingSecretKey: password

        mail:
            secret:
                existingSecret: identity-secret-for-components
                existingSecretKey: mail-secret
            fromAddress: changeme@example.com

optimize:
    enabled: true
    contextPath: /optimize

orchestration:
    security:
        authentication:
            method: oidc
    ingress:
        grpc:
            enabled: true
            host: zeebe.${DOMAIN_NAME}
            tls:
                enabled: true
                secretName: zeebe-c8-tls-grpc
            annotations:
                kubernetes.io/tls-acme: 'true'
    contextPath: /orchestration

console:
    enabled: false # by default, console is not enabled
    contextPath: /

elasticsearch:
    enabled: true
