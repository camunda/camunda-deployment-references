---
# Helm values for deploying Camunda Platform with Bitnami sub-charts.
# This is the "source" deployment used as the starting point for migration tests.
#
# Chart: camunda/camunda-platform (13.x / Camunda 8.8+)
# Usage: helm install camunda camunda/camunda-platform -f bitnami-values.yml
#
# Versions are pinned to match the operator-based target manifests to ensure
# migration version validation passes. When updating operator versions,
# update these values accordingly.

global:
    secrets:
        autoGenerated: true
    identity:
        auth:
            enabled: true
            optimize:
                secret:
                    existingSecret: camunda-credentials
                    existingSecretKey: identity-optimize-client-token
    image:
        registry: registry.camunda.cloud
        pullSecrets:
            - name: registry-camunda-cloud
            - name: index-docker-io

# Bitnami Elasticsearch — pinned to match ECK target (8.19.x)
elasticsearch:
    enabled: true
    image:
        # renovate: datasource=docker depName=bitnami/elasticsearch
        tag: 8.19.11

# Bitnami PostgreSQL for Identity (renamed from postgresql to identityPostgresql in 8.8)
identityPostgresql:
    enabled: true
    auth:
        username: identity
        database: identity
        existingSecret: camunda-credentials

identity:
    enabled: true

# Bitnami Keycloak — pinned to match Keycloak Operator target (26.3.2)
identityKeycloak:
    enabled: true
    image:
        # renovate: datasource=docker depName=bitnami/keycloak
        tag: 26.3.2
    postgresql:
        enabled: true
        auth:
            username: keycloak
            password: keycloak-password
            database: keycloak

# WebModeler with SMTP stub (required for Camunda 8.8+)
webModeler:
    enabled: true
    restapi:
        mail:
            smtpHost: smtp.example.com
            smtpPort: 587
            smtpUser: test@example.com
            fromAddress: noreply@example.com
            secret:
                inlineSecret: placeholder

# Bitnami PostgreSQL for WebModeler
webModelerPostgresql:
    enabled: true
    auth:
        username: webmodeler
        database: webmodeler
        existingSecret: camunda-credentials

optimize:
    enabled: true

# Orchestration cluster (replaces zeebe, operate, tasklist in 8.8+)
orchestration:
    enabled: true
