---
# Helm values for deploying Camunda Platform with Bitnami sub-charts.
# This is the "source" deployment used as the starting point for migration tests.
#
# Chart: camunda/camunda-platform (13.x / Camunda 8.8+)
# Usage: helm install camunda camunda/camunda-platform -f bitnami-values.yml

global:
    secrets:
        autoGenerated: true
    image:
        pullSecrets:
            - name: index-docker-io

# Bitnami Elasticsearch
elasticsearch:
    enabled: true
    replicas: 1
    minimumMasterNodes: 1
    resources:
        requests:
            cpu: 500m
            memory: 1Gi
        limits:
            cpu: 1
            memory: 2Gi

# Bitnami PostgreSQL for Identity (renamed from postgresql to identityPostgresql in 8.8)
identityPostgresql:
    enabled: true
    auth:
        username: identity
        password: identity-password
        database: identity
        secretKeys:
            adminPasswordKey: postgres-password
            userPasswordKey: password

identity:
    enabled: true

# Bitnami Keycloak with its own PostgreSQL
identityKeycloak:
    enabled: true
    postgresql:
        enabled: true
        auth:
            username: keycloak
            password: keycloak-password
            database: keycloak

# WebModeler with SMTP stub (required for Camunda 8.8+)
webModeler:
    enabled: true
    restapi:
        mail:
            smtpHost: smtp.example.com
            smtpPort: 587
            smtpUser: test@example.com
            smtpPassword: test-password
            fromAddress: noreply@example.com

# Bitnami PostgreSQL for WebModeler
webModelerPostgresql:
    enabled: true
    auth:
        username: webmodeler
        password: webmodeler-password
        database: webmodeler
        existingSecret: camunda-postgresql-web-modeler
        secretKeys:
            adminPasswordKey: postgres-password
            userPasswordKey: password

# Orchestration cluster (replaces zeebe, operate, tasklist in 8.8+)
orchestration:
    enabled: true
