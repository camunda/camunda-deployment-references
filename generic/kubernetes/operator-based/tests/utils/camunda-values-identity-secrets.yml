---
global:
    identity:
        auth:
            orchestration:
                secret:
                    existingSecret: identity-secret-for-components
                    existingSecretKey: identity-orchestration-client-token

            admin:
                secret:
                    existingSecret: identity-secret-for-components
                    existingSecretKey: identity-admin-client-token

            optimize:
                secret:
                    existingSecret: identity-secret-for-components
                    existingSecretKey: identity-optimize-client-token

            connectors:
                secret:
                    existingSecret: identity-secret-for-components
                    existingSecretKey: identity-connectors-client-token

            webModeler:
                secret:
                    existingSecret: identity-secret-for-components
                    existingSecretKey: identity-webmodeler-client-token

            console:
                secret:
                    existingSecret: identity-secret-for-components
                    existingSecretKey: identity-console-client-token

identity:
    contextPath: /managementidentity

    # First user configuration
    firstUser:
        enabled: true
        username: admin
        email: admin@camunda-demo.local
        firstName: Admin
        lastName: User
        secret:
            existingSecret: identity-secret-for-components
            existingSecretKey: identity-first-user-password

# TODO: backport this in other RA
connectors:
    security:
        authentication:
            method: oidc
            oidc:
                secret:
                    # TODO: revert to new syntax once https://github.com/camunda/camunda-platform-helm/issues/4314 is fixed
                    existingSecret: identity-secret-for-components
                    existingSecretKey: identity-connectors-client-token

# TODO: backport this in other RA
orchestration:
    security:
        authentication:
            method: oidc
            oidc:
                secret:
                    # TODO: revert to new syntax once https://github.com/camunda/camunda-platform-helm/issues/4314 is fixed
                    existingSecret: identity-secret-for-components
                    existingSecretKey: identity-orchestration-client-token

        # We need to add a mapping for embedded identity
        # this will also overwrite the default mapping for demo user, so we need to readd it again
        # by default the Helm Chart adds any mapping to the admin role
        initialization:
            mappingRules:
                - mappingRuleID: venom-test-client-mapping
                  claimName: client_id
                  claimValue: venom
                - mappingRuleID: demo-user-mapping-rule
                  claimName: preferred_username
                  claimValue: demo
