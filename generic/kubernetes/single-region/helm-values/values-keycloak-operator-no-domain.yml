---
# Keycloak Operator No-Domain Overlay - Auth URLs for localhost/port-forward mode
#
# This file extends values-keycloak-operator.yml with localhost-specific URLs.
# Merge order: values-no-domain.yml + values-keycloak-operator.yml + values-keycloak-operator-no-domain.yml
#   yq ". *+ load(\"values-keycloak-operator.yml\") *+ load(\"values-keycloak-operator-no-domain.yml\")" values-no-domain.yml > values.yml
#
# Port-forward setup:
#   kubectl port-forward svc/keycloak-service 18080:8080 -n camunda
#   kubectl port-forward svc/camunda-orchestration 8080:8080 -n camunda
#   kubectl port-forward svc/camunda-identity 8085:8080 -n camunda
#   kubectl port-forward svc/camunda-optimize 8083:8083 -n camunda
#   kubectl port-forward svc/camunda-console 8087:8080 -n camunda

global:
    identity:
        auth:
            # Public issuer URL for localhost access
            issuer: http://localhost:18080/auth/realms/camunda-platform
            publicIssuerUrl: http://localhost:18080/auth/realms/camunda-platform

            # Public authorization URL (browser redirect)
            authorizationUrl: http://localhost:18080/auth/realms/camunda-platform/protocol/openid-connect/auth

            identity:
                redirectUrl: http://localhost:8085

            optimize:
                redirectUrl: http://localhost:8083

            webModeler:
                redirectUrl: http://localhost:8070

            console:
                redirectUrl: http://localhost:8087

identity:
    contextPath: /

orchestration:
    security:
        authentication:
            oidc:
                redirectUrl: http://localhost:8080

webModeler:
    restapi:
        env:
            - name: CAMUNDA_IDENTITY_BASE_URL
              value: http://localhost:8085

    webapp:
        env:
            - name: OAUTH2_TOKEN_ISSUER
              value: http://localhost:18080/auth/realms/camunda-platform
