---
name: Internal - Global - Renovate Auto Merge

on:
    pull_request:

# Ensure only one instance of this workflow runs per PR at a time.
# With cancel-in-progress: false, new runs wait for previous ones to complete
# instead of cancelling them. This prevents race conditions when multiple commits
# are pushed quickly (e.g., by Renovate rebasing), ensuring each commit's checks
# finish before the next automerge attempt starts.
# See example: https://github.com/camunda/camunda-deployment-references/pull/1352
concurrency:
    group: ${{ github.workflow }}-${{ github.ref }}
    cancel-in-progress: false

jobs:
    renovate-automerge:
        uses: camunda/infraex-common-config/.github/workflows/automerge-global.yml@bd6dcfec5e21f6d6c077c9d59caab66ee8500d7e # 1.5.4
        secrets: inherit
