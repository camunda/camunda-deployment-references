---
# Camunda Platform Helm values for Kind local development WITHOUT domain
#
# This configuration enables:
# - No Ingress (access via port-forward)
# - Local access via localhost with port forwarding
# - OIDC authentication via Keycloak
#
# Used in combination with operator-based values from generic/kubernetes/operator-based/:
# - camunda-elastic-values.yml (Elasticsearch via ECK)
# - camunda-keycloak-no-domain-values.yml (Keycloak via operator, no-domain mode)
# - camunda-identity-values.yml (PostgreSQL for Identity via CloudNativePG)
# - camunda-webmodeler-values.yml (PostgreSQL for Web Modeler via CloudNativePG)

global:
    secrets:
        autoGenerated: true
        name: camunda-credentials

    ingress:
        enabled: false

    identity:
        auth:
            identity:
                redirectUrl: http://localhost:8085

            optimize:
                redirectUrl: http://localhost:8083
                secret:
                    existingSecret: camunda-credentials
                    existingSecretKey: identity-optimize-client-token

            console:
                redirectUrl: http://localhost:8087

            webModeler:
                redirectUrl: http://localhost:8070

connectors:
    enabled: true
    inbound:
        mode: disabled
    resources:
        requests:
            cpu: 100m
            memory: 256Mi
        limits:
            cpu: 1000m
            memory: 1Gi
    security:
        authentication:
            oidc:
                secret:
                    existingSecret: camunda-credentials
                    existingSecretKey: identity-connectors-client-token

identity:
    enabled: true
    fullURL: http://localhost:8085

    resources:
        requests:
            cpu: 50m
            memory: 128Mi
        limits:
            cpu: 500m
            memory: 512Mi

    firstUser:
        enabled: true
        username: admin
        email: admin@camunda.local
        firstName: Admin
        lastName: User
        secret:
            existingSecret: camunda-credentials
            existingSecretKey: identity-firstuser-password

optimize:
    enabled: true
    resources:
        requests:
            cpu: 200m
            memory: 256Mi
        limits:
            cpu: 1000m
            memory: 1Gi

# Reduce Zeebe resources for local development
orchestration:
    clusterSize: '1'
    partitionCount: '1'
    replicationFactor: '1'
    pvcSize: 10Gi
    resources:
        requests:
            cpu: 300m
            memory: 512Mi
        limits:
            cpu: 2000m
            memory: 2Gi
    security:
        authentication:
            oidc:
                secret:
                    existingSecret: camunda-credentials
                    existingSecretKey: identity-orchestration-client-token
        initialization:
            defaultRoles:
                admin:
                    users:
                        - admin

console:
    enabled: true
    resources:
        requests:
            cpu: 50m
            memory: 64Mi
        limits:
            cpu: 500m
            memory: 256Mi

webModeler:
    restapi:
        resources:
            requests:
                cpu: 100m
                memory: 256Mi
            limits:
                cpu: 1000m
                memory: 1Gi
    webapp:
        resources:
            requests:
                cpu: 50m
                memory: 128Mi
            limits:
                cpu: 500m
                memory: 512Mi
    websockets:
        resources:
            requests:
                cpu: 50m
                memory: 128Mi
            limits:
                cpu: 500m
                memory: 512Mi
